@model DCCofee.Models.NguoiDung
@using DCCofee.Models
@{
    ViewBag.Title = "form_DatHang";
    Layout = "~/Views/Shared/_LayoutUser.cshtml";
}


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal" style="display:flex; ; margin-top:10px">
        <h4 style="margin-right:100px">Thông tin khách hàng</h4>

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        @Html.HiddenFor(model => model.Id)



    <div>
        <div class="form-group" style="display: flex; align-items: center;">
            <label for="HoTen" style="flex: 1;">@Html.DisplayNameFor(model => model.HoTen)</label>
            <div class="col-md-10" style="flex: 3;">
                @Html.EditorFor(model => model.HoTen, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.HoTen, "", new { @class = "text-danger" })
            </div>
        </div>



        <div class="form-group" style="display: flex; align-items: center;">
    <label for="Số điện thoại" style="flex: 1;">@Html.DisplayNameFor(model => model.Sdt)</label>
    <div class="col-md-10" style="flex: 3;">
        @Html.EditorFor(model => model.Sdt, new { htmlAttributes = new { @class = "form-control" } })
        @Html.ValidationMessageFor(model => model.Sdt, "", new { @class = "text-danger" })
    </div>
</div>
    </div>

        <div style="margin-left: 30px">


            <div class="form-group" style="display: flex; align-items: center;">
                <label for="Dịa chỉ" style="flex: 1;">@Html.DisplayNameFor(model => model.DiaChi)</label>
                <div class="col-md-10" style="flex: 3;">
                    @Html.EditorFor(model => model.DiaChi, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.DiaChi, "", new { @class = "text-danger" })
                </div>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10" style="margin-left: 30px">
                <input type="submit" value="Lưu" class="btn btn-default" style="background-color: #fe4c50; color: white" />
            </div>
        </div>
    </div>
}



<div style="text-align: center; margin-bottom: 50px; margin-top: 50px">
    <h3>Chi tiết đơn hàng</h3>
</div>
<table class="shop-table">
    <thead>
        <tr>
            <th>Hình ảnh</th>
            <th>Tên sản phảm</th>
            <th>Số lượng</th>
            <th>Đơn giá</th>
            <th>Tổng</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in ViewBag.danhsachGH as List<ChiTietGioHang>)
        {
            <tr>
                <td>
                    @if (!string.IsNullOrEmpty(item.HinhAnh))
                    {
                        <img src="@Url.Content(item.HinhAnh)" style="max-width:70px;height:auto" alt="Ảnh sản phẩm" />
                    }
                </td>
                <td>
                    @item.SanPham.TenSP
                </td>
                <td>
                    @item.SoLuong
                </td>
                <td>
                    @item.DonGia
                </td>

                <td>
                    @{
                        double tempTong = (double)(item.DonGia * item.SoLuong);
                        item.Tong = tempTong;

                        @item.Tong

                    }
                </td>
                <td>
                    @Html.ActionLink("Xóa", "xoa_sanpham", new { id_ctgh = item.ID_ChiTietGiohang })
                </td>
            </tr>

        }
    </tbody>

    </div>
</table>
@{
    double tongtien = 0;
    foreach (var itm in ViewBag.danhsachGH as List<ChiTietGioHang>)
    {
        tongtien += (double)itm.Tong;
    }
}
<div style="display: flex; flex-direction: column; margin-top: 20px;">
    <h5>Tổng tiền : @tongtien</h5>
    <button class="button" style="margin-left: 950px; background-color: #fe4c50; ">
        @Html.ActionLink("Xác nhận đặt hàng", "DatHang", "DatHang", null, new { style = " color: white;" })
    </button>

</div>